import React, { Component } from 'react';
import {SparkScroll, SparkProxy } from '/imports/lib/spark.js';
var Modal = require('boron/DropModal');

const styles = {
  map: {
    position: 'fixed',
    top: 0,
  },
  img: {
    position: 'fixed',
    top: 0,
    zIndex: -1,
  },
  modal: {
    minHeight: 300,
    width: '40%',
    margin: 'auto',
    backgroundColor: 'white',
    zIndex: 100,
  },
}
export class Map extends Component {
  constructor(props){
    super(props);
    this.state = {
      strokeDashoffset: 5123,
      scroll:0,
    }
    this.updateMapPath = this.updateMapPath.bind(this);
    this.showModal = this.showModal.bind(this);
    this.hideModal = this.hideModal.bind(this);
  }

  componentDidMount() {
    // initialize svg
    var node = this.refs.sparkPath;
    var length = ~~ node.getTotalLength();
    this.offsetTarget = length;
    node.style.strokeDasharray = length + ' ' + length;
    console.log(node.style.strokeDasharray);
    console.log(node.getPointAtLength(length*0.5));


  }
  updateMapPath(ratio){
    this.setState({
      strokeDashoffset: this.offsetTarget*(1-ratio)
    })
    if (this.state.offsetTarget < 5080) {
      console.log("1st hinder!");

    }
    //console.log(this.state.strokeDashoffset);
    console.log(ratio);

  }
  showModal(){
    this.refs.modal.show();
  }
  hideModal(){
    this.refs.modal.hide();
  }
  render(){
    return (
      <div>
        <map name="Map" id="Map">
          <area alt="" title="" href="" shape="poly" coords="1123,664,1160,662,1160,688,1124,684" onmousehover={console.log("clicked 1st")}/>
          <area alt="" title="" href="http://google.com" shape="poly" coords="1050,667,1052,696,1084,696,1086,671" />
          <area alt="" title="" href="#" shape="poly" coords="1270,702,1271,734,1291,734,1290,702" />
          <area alt="" title="" href="#" shape="poly" coords="1176,762,1140,783,1120,774,1123,731,1158,711" />
          <area alt="" title="" href="#" shape="poly" coords="1074,635,1075,662,1099,664,1098,635" />
          <area alt="" title="" href="#" shape="poly" coords="1096,607,1120,628,1175,596,1142,575" />
          <area alt="" title="" href="#" shape="poly" coords="1028,626,1066,603,1064,544,1022,567" />
          <area alt="" title="" href="#" shape="poly" coords="970,599,1012,574,971,543,924,576" />
        </map>
        <SparkProxy.div proxyId="hero" className="hero">
          <SparkScroll.span
            proxy="hero"
            callback={this.updateMapPath }
            timeline={{topTop:0, 'topTop+4000':0}}
            style={styles.map}
          >

            <svg width="1330px" height="1000px" viewBox="0 0 1330 1000" version="1.1">
              <g id="Page-1" stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
                <path
                  ref="sparkPath"
                  style={{strokeDashoffset: this.state.strokeDashoffset}}
                  d="M1201.372,672.715c-8.167-0.334-26.016,1.027-34.667,1.5c-11.436,0.625-21.604,0.075-33.31,0.166
                  c-14.471,0.113-32.851-0.553-47.071,1.623c-9.819,1.502-9.36,5.191-5.729,15.154c2.764,7.582,11.414,11.569,18.777,16.246
                  c9.582,6.086,17.894,4.264,29.532,4.953c12.91,0.765,28.55,0.24,41.468,0.857c6.534,0.312,11.126,0.723,17.667,0.833
                  c5.39,0.092,10.62-0.333,16-0.333c3.837,0,8.164-0.334,12-0.334c6.034,0,13.651,0.066,19.666,0.334
                  c5.815,0.259,9.513-0.06,15.334,0c4.791,0.048,9.003,0.092,13.796,1.166c2.545,0.57,4.424,4.022,5.537,6.167
                  c1.597,3.075,2.934,7.476,4.498,10.57c1.34,2.649,2.87,5.673,4.369,8.167c1.686,2.806,1.068,5.036,0.14,8.465
                  c-0.702,2.59-1.368,5.76-2.174,8.298c-0.879,2.77-1.616,2.873-2.454,5.656c-0.446,1.482-2.799,5.98-2.562,7.484
                  c-2.198,0.153-4.598-0.39-6.817-0.479c-4.446-0.18-8.864-0.328-13.338-0.328c-9.278,0-18.45-0.486-27.707-0.824
                  c-7.62-0.278-15.159-1.468-22.768-1.979c-3.343-0.225-7.043-0.826-10.354-1.362c-3.026-0.49-5.64-0.35-8.672-0.879
                  c-3.894-0.68-7.785-1.047-11.714-1.459c-4.134-0.434-8.44-0.795-12.6-0.833c-5.896-0.055-11.533-1.079-17.354-1.87
                  c-2.897-0.394-5.772-0.776-8.662-1.155c-3.628-0.475-6.642-1.604-10.118-2.483c-6.73-1.703-13.853-1.911-20.729-2.681
                  c-2.667-0.299-7.355,0.11-9.062-2.444c-1.752-2.623-1.653-7.025-2.759-10.009c-1.427-3.854-2.787-7.454-3.614-11.499
                  c-1.601-7.82-5.994-12.145-11.717-16.688c-2.709-2.15-6.252-6.408-8.333-9.167c-2.857-3.787-6.411-6.094-5.557-10.883
                  c0.826-4.629-0.934-10.182-1.943-14.95c-0.878-4.146-0.869-6.163-1.184-10.352c-0.061-0.808,5.657-4.546,7.517-7.815
                  c2.71-4.766,10.08-13.798,15.5-14.167c7.334-0.5,20.422-0.666,34.334-0.666c8.73,0,17.46,0.292,26.189,0.374
                  c3.865,0.036,7.739,0.072,11.603-0.088c1.214-0.05,2.512-0.031,3.706-0.274c1.882-0.383,1.661-0.882,1.686-2.964
                  c0.038-3.25,0.149-6.498,0.149-9.748c0-2.252,0.122-4.539,0.004-6.786c-0.08-1.529-0.652-2.887-0.846-4.347
                  c-0.232-1.757,1.207-3.86-0.607-4.717c-1.399-0.659-4.969-0.437-6.5-0.666c-2.57-0.386-5.246-0.923-7.833-1.167
                  c-2.431-0.229-3.238-0.208-5.667-0.333c-4.68-0.24-8.558,0.162-12.057-0.217c-5.218-0.565-9.251-0.818-14.527-0.818
                  c-18.772,0-50.395-0.043-69.167,0c-8.77,0.021-9.667-3.337-17-8.334c-6.931-4.724-19.992-30.971-29-32.167
                  c-17.078-2.269-22.307-0.856-25.5-0.333c-4.384,0.719-8.709,2.658-12.828,4.235c-7.337,2.808-14.6,5.807-21.858,8.808
                  c-17.243,7.129-30.498,11.912-47.896,18.66c-4.02,1.56-11.833,4-16,5.5c-6.048,2.177-13.551,4.609-19.666,6.333
                  c-5.159,1.454-10.475,1.889-15.774,2.759c-3.332,0.548-7.523,0.704-10.893,1.241c-7.126,1.135-14.109,0.5-21.333,0.5
                  c-6.626,0-13.944-2.933-20.5-4c-4.156-0.677-9.141-1.976-13.334-2.666c-2.742-0.451-6.988-1.778-9.666-2.5
                  c-1.103-0.298-37.741-8.927-38.834-9.334c-17-6.333-37-0.833-52.833,0.667c-15.723,1.489,4.574,0.629-11.333,0.667
                  c-3.952,0.01-17.881,2.333-21.833,2.333c0.511-0.001-23.178,2.163-22.667,2.167c-13.717,0.254-18.938,1.389-32.833,2.166
                  c-18.312,1.024-58.43-5-68.167-5c-10.833,0-50.833,2.834-93.167,6.667c-17.024,1.541-35.667,4-53.667,1.833
                  c-24.024-2.893-53.942-5.278-77.833-8.666c-28.114-3.987-56-5.334-62.333-7.834c-22.971-9.067-50.536-19.357-74.667-26.333
                  c-18.308-5.293-37.533-7.268-56.158-11.171c-4.987-1.046-9.857-2.582-14.819-3.67c-2.143-0.47-4.433-0.208-6.667-0.606
                  c-2.145-0.382-4.254-1.044-6.409-1.353c-4.158-0.595-7.884-1.158-11.889-2.37c-3.03-0.918-5.958-1.761-8.904-2.89
                  c-2.555-0.979-1.645-4.543-2.321-7.274c-0.593-2.394,0.104-7.491-0.833-9.833c-0.784-1.957-0.683-8.493-1.333-10.5
                  c-1.441-4.442-1.41-12.424-2.333-17c-1.975-9.784-2.935-26.038-3.5-36c-0.521-9.174,6.754-47.578,10.5-55.999
                  c7.508-16.878,19.167-29.666,22.167-31.5c8.804-5.381,12.536,0.055,24.833,4.333c7.667,2.667,10.464,3.801,27.167,9.334
                  c12.77,4.23,33.362,7.37,57.5,13.667c8.403,2.192,22.199,6.646,30,10.833c8.208,4.406,16.85,11.357,21.667,15.667
                  c6.333,5.667,47.543,5.833,67.167,5.833c36.865,0,72.107-0.928,108.836-0.5c59.228,0.688,117.35-2.092,176.167-2.666
                  c20.688-0.201,40.443-2.834,61.5-2.834c43.364,0,112.5,4.667,155.834,7.334c20.993,1.292,61.133-3.167,82.166-3.167
                  c19.807,0,54.334,7.5,57.84,8.165c3.247,0.616,16.327,18.942,21.996,28.001c4.794,7.66,11.482,18.694,15.833,22.5
                  c2.667,2.333,31.851-2.92,48.667-3.167c11.155-0.164,24.833-2.833,29.833-0.166c6.498,3.466,22.665,20.874,35.667,31
                  c5.253,4.091,10.263,8.511,15.28,12.883c3.433,2.991,6.716,6.504,10.375,9.194c1.294,0.952,2.817,1.295,4.224,2.125
                  c1.666,0.983,3.128,2.274,4.634,3.479c1.568,1.253,2.475,3.026,4.025,4.316c0.743,0.618,1.804,1.016,2.461,1.703
                  c0.536,0.56,4.742,5.096,5.334,5.634c2.112,1.926,4.25-2.301,6.333-4.333c1.186-1.157,1.92-1.804,3.167-2.834
                  c1.404-1.161,2.204-1.902,3.667-3c1.982-1.487,1.888-2.457,0.298-4.959c-1.054-1.659-2.558-2.992-3.628-4.708
                  c-0.911-1.462-1.899-2.844-2.995-4.167c-1.411-1.704-3.055-4.447-4.158-6.369c-2.734-4.765-5.153-8.726-8.184-13.463
                  c-2.066-3.23-4.296-6.866-6-10.334c-0.566-1.152-4.166-6.031-5.5-8.333c-3.503-6.047-5.841-9.69-9.667-15.5
                  c-2.505-3.804-4.166-9.667-6.666-12.667c-2.637-3.164-7.525-5.59-9.667-9.166c-6.284-10.494-30.333-24.668-32-34.335
                  c0.333-7.833,9.678-35.933,19-51.002c7.446-12.035,25.36-27.149,35.167-37.165c9.983-10.197,17.632-15.061,26.166-26.167
                  c13.545-17.627,28.167-44,38-61.833c13.65-24.758,21.828-61,27.824-74.294c2.182-4.838,20.629,2.101,25.538,6.574
                  c3.886,3.54,2.8,9.221-4.072,23.669c-11.633,24.458-15.012,37.967-25.462,62.885c-9.544,22.76-32.549,50.833-41.166,74
                  c-5.466,14.692-11.2,28.153-15.334,41.666c-4.665,15.248-9.333,24.666-7.666,42.999c1.896,20.844,8.291,44.363,19.833,61.833
                  c0.553,0.836,2.979,2.634,3.462,3.513c0.919,1.674,0.52,1.399,1.855,2.783c1.368,1.42,3.166,3.405,4.85,4.371
                  c2.101,1.207,4.807,4.132,6.666,5.667c4.579,3.781,7.698,9.568,13.334,11.833c1.941,0.78,2.541-0.974,4.301-2.329
                  c1.757-1.354,2.312-3.152,3.394-5.003c0.996-1.704,2.438-2.933,3.642-4.459c1.037-1.314,3.025-2.587,3.83-4.042
                  c1.015-1.838,3.482-3.981,4.834-5.5c1.679-1.889,3.828-4.082,5.5-6c2.713-3.113-0.559-5.378-0.667-9.666
                  c-0.093-3.672-0.883-8.2-1.5-11.834c-0.516-3.042-1.119-6.176-1.667-9.166c-0.73-3.982-0.475-6.89-2-10.667
                  c-0.597-1.476-0.545-4.584-1.336-5.967c-1.169-2.046-0.277-4.835-0.497-7.2c-0.214-2.307-0.756-7.696-1-10
                  c-0.486-4.606-0.58-11.238-1.167-15.833c-1-7.833,6.5-13.165,11.334-19.667c7.581-10.197,13.684-19.739,18.666-31.167
                  c2.834-6.5,3.582-14.128,2.834-25.5c-1.227-18.645-3.334-30.834-2.667-47.167c0.402-9.849,12.749-47.52,17.593-61.982
                  c2.74-8.183,4.574-5.852,14.407-5.519c7.725,0.262,15.667,5.167,23.086,9.516c3.812,2.235,1.37,25.692-8.753,57.15
                  c-4.666,14.5-12.657,16.559-15.833,31.5c-0.583,2.743,5.5,20.167,10.333,36.167c4.009,13.271,9.108,24.061,12,37.5
                  c3.617,16.814,5.167,39.833,9.5,79.558c1.732,15.88,4.312,30.209-0.833,45.275c-4.038,11.825-3.333,15.501-11.833,40.834
                  c-3.31,9.863-2.794,9.146-3,19.501c-0.106,5.375-0.661,21.295-0.5,26.667c0.071,2.382-0.945,8.37-0.879,10.739
                  c0.063,2.3-0.004,4.057-0.229,6.325c-0.287,2.899-3.892,4.103-7.472,4.424c-3.289,0.295-10.845-0.821-14.097-0.797
                  c-4.273,0.032-3.982,0.286-7.657-1.858c-2.276-1.329-1.295-15.805-0.833-18.5c1-5.833,0.555-3.54,1.5-14.166
                  c0.295-3.318,0.132-13.672,2.333-16.167c2.5-2.834,0.119,0.019,2.5-2.834c2.281-2.733,3.754-1.479,6.5-7.333
                  c0.485-1.033,1.397-3.062,1.459-4.182c0.148-2.683,0.479-2.653,0.482-4.596c0.007-3.275-0.156-4.173-1.29-7.714
                  c-0.753-2.35-1.757-4.321-3.151-6.342c-1.6-2.316-2.811-3.337-5.333-4.5c-1.708-0.787-3.562-2.044-5.333-2.667
                  c-3.94-1.386-8.29-1.819-12.621-0.703c-3.635,0.937-6.967,1.926-9.379,5.037c-1.257,1.622-3.935,4.144-4.801,5.971
                  c-0.77,1.622-1.59,3.382-2.24,5.029c-1.66,4.2-0.715,7.915,0.509,12.004c1.309,4.375,4.129,8.141,7.529,11.127
                  c2.02,1.774,8.223,3.517,11.503,4.202c1.541,0.322,10.152-0.797,13.666-2.5"
                  id="Path-13"
                  stroke="#70CE44"
                  strokeWidth="5">
                </path>
              </g>
            </svg>

          </SparkScroll.span>



        </SparkProxy.div>
        <img src="images/map.jpg" style={styles.img} usemap="#Map"/>


      </div>
    );
  }
}
